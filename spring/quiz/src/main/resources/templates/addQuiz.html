<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>관리자 퀴즈 관리</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h1 {
            color: #6495ED;
            text-align: center;
        }
        table, th, td {
            border: 1px solid #aaa;
            border-collapse: collapse;
        }
        th, td {
            padding: 6px;
        }
        .title {
            font-weight: bold;
        }
        .content {
            margin: 10px 0;
        }
        input[type="submit"] {
            border: none;
            background-color: gray;
            cursor: pointer;
            color: #fff;
            padding: 6px;
            border-radius: 5px;
            font-size: 16px;
        }
        input[type="submit"]:hover {
            background-color: #ccc;
        }
        .center {
            text-align: center;
        }
        a {
            text-decoration: none;
            color: black;
            font-weight: bold;
        }
        a:hover {
            opacity: 0.7;
        }
        .header {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }
        .header h3 {
            margin-right: 10px;
            margin-bottom: 0;
        }
        .form-container {
            margin: 20px auto;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            max-width: 600px;
        }
        .form-container textarea, .form-container input[type="text"] {
            width: 100%;
            padding: 8px;
            margin-bottom: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .form-container input[type="radio"] {
            margin-right: 10px;
        }
        .form-container .errors {
            color: red;
        }
    </style>
</head>
<body>
<h1>관리자 퀴즈 관리</h1>

<div class="form-container">
    <p th:if="${complete}" th:text="${complete}" style="color: blue"></p>
    <form method="post" th:action="${quizForm.newQuiz} ? @{/quiz/insert} : @{/quiz/update}" th:object="${quizForm}">
        <label class="title">문제</label><br>
        <textarea rows="5" th:field="*{question}" class="content" placeholder="문제를 입력하세요"></textarea>
        <div th:if="${#fields.hasErrors('question')}" th:errors="*{question}" class="errors"></div>

        <label class="title">정답</label><br>
        <input type="radio" value="true" th:field="*{answer}" class="content"> O<br>
        <input type="radio" value="false" th:field="*{answer}" class="content"> X<br>
        <div th:if="${#fields.hasErrors('answer')}" th:errors="*{answer}" class="errors"></div>

        <label class="title">출제자</label><br>
        <input type="text" th:field="*{author}" placeholder="출제자를 입력하세요"/>
        <div th:if="${#fields.hasErrors('author')}" th:errors="*{author}" class="errors"></div>

        <input th:if="${id}" type="hidden" th:field="*{id}">
        <input type="submit" th:value="${btn}">
    </form>
</div>

<hr>
<div th:if="${quizForm.newQuiz}">
    <h3>등록된 퀴즈 목록</h3>
    <p th:if="${delcomplete}" th:text="${delcomplete}" style="color: blue"></p>
    <p th:if="${msg}" th:text="${msg}" style="color:red"></p>
    <table th:unless="${#lists.isEmpty(list)}" style="table-layout: fixed;">
        <thead>
        <tr>
            <th>No</th>
            <th>문제</th>
            <th>정답</th>
            <th>출제자</th>
            <th>수정</th>
            <th>삭제</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="obj : ${list}">
            <td th:text="${obj.id}" class="center"></td>
            <td th:text="${obj.question}"></td>
            <td th:text="${obj.answer} ? 'O' : 'X'" class="center"></td>
            <td th:text="${obj.author}" class="center"></td>
            <td class="center">
                <form method="get" th:action="@{/quiz/{id}(id=${obj.id})}">
                    <input type="submit" value="수정" class="center">
                </form>
            </td>
            <td class="center">
                <form method="post" th:action="@{/quiz/delete}">
                    <input type="hidden" name="id" th:value="${obj.id}">
                    <input type="submit" value="삭제" class="center">
                </form>
            </td>
        </tr>
        </tbody>
    </table>
    <p th:if="${#lists.isEmpty(list)}">새로운 퀴즈를 등록해주세요</p>
</div>
<p th:unless="${quizForm.newQuiz}">
    <a href="#" th:href="@{/quiz}">돌아가기</a>
</p>
</body>
</html>